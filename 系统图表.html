<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŒ»é™¢é¢„çº¦æŒ‚å·ç³»ç»Ÿ - ç³»ç»Ÿå›¾è¡¨</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        @page {
            size: A4;
            margin: 1.5cm;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
            font-size: 12pt;
            line-height: 1.6;
            color: #000;
            background: #fff;
            padding: 20px;
        }
        .page {
            width: 100%;
            max-width: 21cm;
            margin: 0 auto;
            padding: 1cm;
        }
        h1 {
            font-size: 18pt;
            text-align: center;
            font-weight: bold;
            margin-bottom: 30pt;
            padding-bottom: 10pt;
            border-bottom: 2px solid #000;
        }
        h2 {
            font-size: 14pt;
            font-weight: bold;
            margin-top: 30pt;
            margin-bottom: 15pt;
            padding-bottom: 5pt;
            border-bottom: 1px solid #ccc;
        }
        h3 {
            font-size: 12pt;
            font-weight: bold;
            margin-top: 20pt;
            margin-bottom: 10pt;
        }
        .diagram-container {
            margin: 20px 0;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow-x: auto;
        }
        .diagram-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .page-break {
            page-break-before: always;
        }
        @media print {
            body { padding: 0; }
            .page { padding: 0; max-width: none; }
            .diagram-container { break-inside: avoid; }
        }
    </style>
</head>
<body>
<div class="page">

<h1>åŒ»é™¢é¢„çº¦æŒ‚å·ç³»ç»Ÿ<br>ç³»ç»Ÿå›¾è¡¨æ±‡æ€»</h1>

<h2>ä¸€ã€ç³»ç»Ÿæ¶æ„å›¾</h2>

<h3>1.1 ç³»ç»Ÿé€»è¾‘æ¶æ„å›¾ï¼ˆåŒ…å›¾ï¼‰</h3>
<div class="diagram-container">
    <div class="mermaid">
graph TB
    subgraph è¡¨ç°å±‚["è¡¨ç°å±‚ Presentation"]
        P1[æ‚£è€…ç«¯ Vue]
        P2[åŒ»ç”Ÿç«¯ Vue]
        P3[ç®¡ç†å‘˜ç«¯ Vue]
    end
    
    subgraph æ§åˆ¶å±‚["æ§åˆ¶å±‚ Controller"]
        C1[AuthController]
        C2[DoctorController]
        C3[AppointmentController]
        C4[AdminController]
        C5[ScheduleController]
    end
    
    subgraph ä¸šåŠ¡å±‚["ä¸šåŠ¡å±‚ Service"]
        S1[AuthService]
        S2[DoctorProfileService]
        S3[AppointmentService]
        S4[ScheduleService]
        S5[NotificationService]
    end
    
    subgraph æ•°æ®è®¿é—®å±‚["æ•°æ®è®¿é—®å±‚ Repository"]
        R1[UserRepository]
        R2[DoctorRepository]
        R3[AppointmentRepository]
        R4[ScheduleRepository]
        R5[PatientRepository]
    end
    
    subgraph æ•°æ®å±‚["æ•°æ®å±‚ Database"]
        DB[(MySQL 8.0)]
    end
    
    P1 & P2 & P3 -->|HTTP/REST| C1 & C2 & C3 & C4 & C5
    C1 & C2 & C3 & C4 & C5 --> S1 & S2 & S3 & S4 & S5
    S1 & S2 & S3 & S4 & S5 --> R1 & R2 & R3 & R4 & R5
    R1 & R2 & R3 & R4 & R5 -->|JPA/Hibernate| DB
    </div>
</div>

<h3>1.2 ç³»ç»Ÿç‰©ç†éƒ¨ç½²å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
graph TB
    subgraph å®¢æˆ·ç«¯["å®¢æˆ·ç«¯ Client"]
        Browser[æµè§ˆå™¨<br/>Chrome/Edge/Firefox]
    end
    
    subgraph äº‘æœåŠ¡å™¨["äº‘æœåŠ¡å™¨ 152.136.13.236"]
        subgraph Docker["Docker Compose"]
            Frontend[Frontend Container<br/>Nginx:8081]
            Backend[Backend Container<br/>Spring Boot:8082]
            MySQL[MySQL Container<br/>MySQL:3307]
        end
    end
    
    Browser -->|HTTP:8081| Frontend
    Frontend -->|API:8082| Backend
    Backend -->|JDBC:3306| MySQL
    </div>
</div>

</div>


<div class="page page-break">

<h2>äºŒã€ç±»è®¾è®¡å›¾</h2>

<h3>2.1 æ ¸å¿ƒå®ä½“ç±»å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
classDiagram
    class User {
        -String id
        -String phone
        -String passwordHash
        -UserRole role
        -UserStatus status
        -Integer loginFailures
        -LocalDateTime createdAt
        +login()
        +logout()
    }
    
    class Patient {
        -String id
        -String userId
        -String name
        -String idCard
        -Gender gender
        -LocalDate birthDate
        -String medicalHistory
        +getProfile()
        +updateProfile()
    }
    
    class Doctor {
        -String id
        -String userId
        -String name
        -String employeeId
        -DoctorTitle title
        -String departmentId
        -String licenseNumber
        +getSchedule()
        +createSchedule()
    }
    
    class Department {
        -String id
        -String name
        -String category
        -String description
        -Boolean enabled
        +getDoctors()
    }
    
    class Schedule {
        -String id
        -String doctorId
        -LocalDate scheduleDate
        -Boolean isWorking
        +getTimeSlots()
    }
    
    class TimeSlot {
        -String id
        -String scheduleId
        -TimePeriod period
        -Integer totalSlots
        -Integer remainingSlots
        -Integer version
        +decrementSlot()
    }
    
    class Appointment {
        -String id
        -String appointmentNo
        -String patientId
        -String doctorId
        -String timeSlotId
        -AppointmentStatus status
        +create()
        +cancel()
    }
    
    User "1" -- "1" Patient : has
    User "1" -- "1" Doctor : has
    Department "1" -- "*" Doctor : contains
    Doctor "1" -- "*" Schedule : has
    Schedule "1" -- "*" TimeSlot : contains
    TimeSlot "1" -- "*" Appointment : books
    Patient "1" -- "*" Appointment : makes
    Doctor "1" -- "*" Appointment : receives
    </div>
</div>

<h3>2.2 æœåŠ¡å±‚ç±»å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
classDiagram
    class AuthService {
        +login(LoginRequest) LoginResponse
        +register(RegisterRequest) void
        +logout() void
        +validateToken(String) boolean
    }
    
    class PatientService {
        +getProfile(String) PatientDTO
        +updateProfile(PatientDTO) void
        +getAppointments(String) List
    }
    
    class DoctorProfileService {
        +getProfile(String) DoctorDTO
        +searchDoctors(SearchDTO) List
        +getTopDoctors(int) List
    }
    
    class AppointmentService {
        +createAppointment(CreateDTO) AppointmentDTO
        +cancelAppointment(String, String) void
        +getDetail(String) AppointmentDTO
    }
    
    class ScheduleService {
        +createSchedule(ScheduleDTO) void
        +getSchedule(String, LocalDate) ScheduleDTO
        +updateTimeSlot(TimeSlotDTO) void
    }
    
    class NotificationService {
        +sendNotification(NotificationDTO) void
        +getNotifications(String) List
        +markAsRead(String) void
    }
    
    AuthService --> UserRepository
    PatientService --> PatientRepository
    DoctorProfileService --> DoctorRepository
    AppointmentService --> AppointmentRepository
    ScheduleService --> ScheduleRepository
    NotificationService --> NotificationRepository
    </div>
</div>

</div>


<div class="page page-break">

<h2>ä¸‰ã€åºåˆ—å›¾</h2>

<h3>3.1 ç”¨æˆ·ç™»å½•åºåˆ—å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯Vue
    participant C as AuthController
    participant S as AuthService
    participant R as UserRepository
    participant DB as MySQL
    
    U->>F: è¾“å…¥æ‰‹æœºå·/å¯†ç 
    F->>F: æ ¼å¼éªŒè¯
    F->>C: POST /api/auth/login
    C->>S: login(request)
    S->>R: findByPhone(phone)
    R->>DB: SELECT * FROM users
    DB-->>R: Userå¯¹è±¡
    R-->>S: Userå¯¹è±¡
    S->>S: éªŒè¯å¯†ç (BCrypt)
    alt å¯†ç æ­£ç¡®
        S->>S: ç”ŸæˆJWT Token
        S-->>C: LoginResponse
        C-->>F: 200 OK + Token
        F->>F: å­˜å‚¨Token
        F-->>U: è·³è½¬é¦–é¡µ
    else å¯†ç é”™è¯¯
        S->>S: å¢åŠ å¤±è´¥æ¬¡æ•°
        S-->>C: æŠ›å‡ºå¼‚å¸¸
        C-->>F: 401 Unauthorized
        F-->>U: æ˜¾ç¤ºé”™è¯¯æç¤º
    end
    </div>
</div>

<h3>3.2 é¢„çº¦æŒ‚å·åºåˆ—å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
sequenceDiagram
    participant P as æ‚£è€…
    participant F as å‰ç«¯Vue
    participant C as AppointmentController
    participant AS as AppointmentService
    participant SS as ScheduleService
    participant NS as NotificationService
    participant DB as MySQL
    
    P->>F: é€‰æ‹©åŒ»ç”Ÿå’Œæ—¶æ®µ
    F->>C: GET /api/schedules/{doctorId}
    C->>SS: getSchedule(doctorId, date)
    SS->>DB: æŸ¥è¯¢æ’ç­å’Œæ—¶æ®µ
    DB-->>SS: Schedule + TimeSlots
    SS-->>C: ScheduleDTO
    C-->>F: æ’ç­ä¿¡æ¯
    F-->>P: æ˜¾ç¤ºå¯é¢„çº¦æ—¶æ®µ
    
    P->>F: å¡«å†™ä¿¡æ¯å¹¶æäº¤
    F->>C: POST /api/appointments
    C->>AS: createAppointment(dto)
    AS->>DB: æ£€æŸ¥å·æº(ä¹è§‚é”)
    alt å·æºå……è¶³
        AS->>DB: æ‰£å‡å·æº
        AS->>DB: åˆ›å»ºé¢„çº¦è®°å½•
        AS->>NS: å‘é€é€šçŸ¥
        NS->>DB: ä¿å­˜é€šçŸ¥
        AS-->>C: AppointmentDTO
        C-->>F: 201 Created
        F-->>P: æ˜¾ç¤ºé¢„çº¦æˆåŠŸ
    else å·æºä¸è¶³
        AS-->>C: æŠ›å‡ºå¼‚å¸¸
        C-->>F: 400 Bad Request
        F-->>P: æç¤ºå·æºå·²æ»¡
    end
    </div>
</div>

</div>


<div class="page page-break">

<h3>3.3 AIæ™ºèƒ½åŠ©æ‰‹åºåˆ—å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯Vue
    participant C as AIChatController
    participant S as AIChatService
    participant AI as é€šä¹‰åƒé—®API
    
    U->>F: è¾“å…¥é—®é¢˜
    F->>F: éªŒè¯éç©º
    F->>C: POST /api/ai/chat
    C->>S: chat(message)
    S->>S: æ„å»ºç³»ç»Ÿæç¤ºè¯
    S->>AI: HTTPè¯·æ±‚(é—®é¢˜+ä¸Šä¸‹æ–‡)
    AI-->>S: AIå›å¤å†…å®¹
    S-->>C: ChatResponse
    C-->>F: 200 OK
    F->>F: æ‰“å­—æœºæ•ˆæœæ˜¾ç¤º
    F-->>U: æ˜¾ç¤ºAIå›å¤
    </div>
</div>

<h2>å››ã€æ•°æ®åº“è®¾è®¡å›¾</h2>

<h3>4.1 æ•°æ®åº“ERå›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
erDiagram
    users ||--o| patients : "1:1"
    users ||--o| doctors : "1:1"
    users ||--o| admins : "1:1"
    users ||--o{ notifications : "1:n"
    
    departments ||--o{ doctors : "1:n"
    doctors ||--o{ schedules : "1:n"
    doctors ||--o{ doctor_leaves : "1:n"
    doctors ||--o{ doctor_reviews : "1:n"
    doctors ||--o{ appointments : "1:n"
    
    schedules ||--o{ time_slots : "1:n"
    time_slots ||--o{ appointments : "1:n"
    
    patients ||--o{ appointments : "1:n"
    patients ||--o{ doctor_reviews : "1:n"
    
    hospitals ||--o{ doctors : "1:n"
    
    users {
        varchar id PK
        varchar phone UK
        varchar password_hash
        varchar role
        varchar status
        datetime created_at
    }
    
    patients {
        varchar id PK
        varchar user_id FK
        varchar name
        varchar id_card UK
        varchar gender
        date birth_date
    }
    
    doctors {
        varchar id PK
        varchar user_id FK
        varchar name
        varchar employee_id UK
        varchar title
        varchar department_id FK
        varchar license_number UK
    }
    
    departments {
        varchar id PK
        varchar name UK
        varchar category
        boolean enabled
    }
    
    schedules {
        varchar id PK
        varchar doctor_id FK
        date schedule_date
        boolean is_working
    }
    
    time_slots {
        varchar id PK
        varchar schedule_id FK
        varchar period
        int total_slots
        int remaining_slots
        int version
    }
    
    appointments {
        varchar id PK
        varchar appointment_no UK
        varchar patient_id FK
        varchar doctor_id FK
        varchar time_slot_id FK
        date appointment_date
        varchar status
    }
    </div>
</div>

</div>


<div class="page page-break">

<h2>äº”ã€æµ‹è¯•æµç¨‹å›¾ï¼ˆæ§åˆ¶æµå›¾ï¼‰</h2>

<h3>5.1 ç”¨æˆ·ç™»å½•æ¨¡å—æ§åˆ¶æµå›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart TD
    A([1. å¼€å§‹]) --> B[2. è¾“å…¥æ‰‹æœºå·/å¯†ç ]
    B --> C{3. æ ¼å¼éªŒè¯}
    C -->|å¦| D[4. æç¤ºæ ¼å¼é”™è¯¯]
    D --> M([13. ç»“æŸ])
    C -->|æ˜¯| E[5. æŸ¥è¯¢ç”¨æˆ·]
    E --> F{6. ç”¨æˆ·å­˜åœ¨?}
    F -->|å¦| G[7. æç¤ºç”¨æˆ·ä¸å­˜åœ¨]
    G --> M
    F -->|æ˜¯| H[8. éªŒè¯å¯†ç ]
    H --> I{9. å¯†ç æ­£ç¡®?}
    I -->|å¦| J[10. æç¤ºå¯†ç é”™è¯¯]
    J --> M
    I -->|æ˜¯| K[11. ç”ŸæˆJWT Token]
    K --> L[12. è·³è½¬é¦–é¡µ]
    L --> M
    
    style A fill:#90EE90
    style M fill:#FFB6C1
    style C fill:#87CEEB
    style F fill:#87CEEB
    style I fill:#87CEEB
    </div>
</div>

<h3>5.2 é¢„çº¦æŒ‚å·æ¨¡å—æ§åˆ¶æµå›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart TD
    A([1. å¼€å§‹]) --> B[2. é€‰æ‹©åŒ»ç”Ÿæ—¶æ®µ]
    B --> C{3. æ£€æŸ¥å·æº}
    C -->|æ— | D[4. æç¤ºå·æºå·²æ»¡]
    D --> K([11. ç»“æŸ])
    C -->|æœ‰| E[5. å¡«å†™å°±è¯Šä¿¡æ¯]
    E --> F{6. ä¿¡æ¯å®Œæ•´?}
    F -->|å¦| G[7. æç¤ºå¡«å†™å®Œæ•´]
    G --> K
    F -->|æ˜¯| H[8. åˆ›å»ºé¢„çº¦]
    H --> I[9. æ‰£å‡å·æº]
    I --> J[10. å‘é€é€šçŸ¥]
    J --> K
    
    style A fill:#90EE90
    style K fill:#FFB6C1
    style C fill:#87CEEB
    style F fill:#87CEEB
    </div>
</div>

<h3>5.3 AIæ™ºèƒ½åŠ©æ‰‹æ¨¡å—æ§åˆ¶æµå›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart TD
    A([1. å¼€å§‹]) --> B[2. è¾“å…¥é—®é¢˜]
    B --> C{3. è¾“å…¥éç©º?}
    C -->|å¦| D[4. æç¤ºè¯·è¾“å…¥]
    D --> I([9. ç»“æŸ])
    C -->|æ˜¯| E[5. è°ƒç”¨AI API]
    E --> F{6. å“åº”æˆåŠŸ?}
    F -->|å¦| G[7. æ˜¾ç¤ºç½‘ç»œé”™è¯¯]
    G --> I
    F -->|æ˜¯| H[8. æ˜¾ç¤ºAIå›å¤]
    H --> I
    
    style A fill:#90EE90
    style I fill:#FFB6C1
    style C fill:#87CEEB
    style F fill:#87CEEB
    </div>
</div>

</div>


<div class="page page-break">

<h2>å…­ã€çŠ¶æ€å›¾</h2>

<h3>6.1 é¢„çº¦çŠ¶æ€è½¬æ¢å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
stateDiagram-v2
    [*] --> PENDING: åˆ›å»ºé¢„çº¦
    PENDING --> CONFIRMED: ç³»ç»Ÿç¡®è®¤
    PENDING --> CANCELLED: æ‚£è€…å–æ¶ˆ
    CONFIRMED --> COMPLETED: å°±è¯Šå®Œæˆ
    CONFIRMED --> CANCELLED: æ‚£è€…å–æ¶ˆ
    COMPLETED --> [*]
    CANCELLED --> [*]
    
    PENDING: å¾…ç¡®è®¤
    CONFIRMED: å·²ç¡®è®¤
    COMPLETED: å·²å®Œæˆ
    CANCELLED: å·²å–æ¶ˆ
    </div>
</div>

<h3>6.2 ç”¨æˆ·çŠ¶æ€è½¬æ¢å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
stateDiagram-v2
    [*] --> PENDING: æ³¨å†Œ(åŒ»ç”Ÿ)
    [*] --> ACTIVE: æ³¨å†Œ(æ‚£è€…)
    PENDING --> ACTIVE: ç®¡ç†å‘˜å®¡æ‰¹é€šè¿‡
    PENDING --> INACTIVE: ç®¡ç†å‘˜æ‹’ç»
    ACTIVE --> LOCKED: ç™»å½•å¤±è´¥5æ¬¡
    LOCKED --> ACTIVE: 30åˆ†é’Ÿåè‡ªåŠ¨è§£é”
    ACTIVE --> INACTIVE: ç®¡ç†å‘˜ç¦ç”¨
    INACTIVE --> ACTIVE: ç®¡ç†å‘˜å¯ç”¨
    
    PENDING: å¾…å®¡æ‰¹
    ACTIVE: æ­£å¸¸
    LOCKED: å·²é”å®š
    INACTIVE: å·²ç¦ç”¨
    </div>
</div>

<h3>6.3 åŒ»ç”Ÿè¯·å‡çŠ¶æ€è½¬æ¢å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
stateDiagram-v2
    [*] --> PENDING: æäº¤ç”³è¯·
    PENDING --> APPROVED: ç®¡ç†å‘˜æ‰¹å‡†
    PENDING --> REJECTED: ç®¡ç†å‘˜æ‹’ç»
    APPROVED --> [*]
    REJECTED --> [*]
    
    PENDING: å¾…å®¡æ‰¹
    APPROVED: å·²æ‰¹å‡†
    REJECTED: å·²æ‹’ç»
    </div>
</div>

<h2>ä¸ƒã€æ´»åŠ¨å›¾</h2>

<h3>7.1 æ‚£è€…é¢„çº¦æŒ‚å·æ´»åŠ¨å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart TD
    A([å¼€å§‹]) --> B[ç™»å½•ç³»ç»Ÿ]
    B --> C[æœç´¢åŒ»ç”Ÿ]
    C --> D[é€‰æ‹©åŒ»ç”Ÿ]
    D --> E[æŸ¥çœ‹æ’ç­]
    E --> F{æœ‰å¯ç”¨æ—¶æ®µ?}
    F -->|å¦| C
    F -->|æ˜¯| G[é€‰æ‹©æ—¶æ®µ]
    G --> H[å¡«å†™å°±è¯Šä¿¡æ¯]
    H --> I[æäº¤é¢„çº¦]
    I --> J{é¢„çº¦æˆåŠŸ?}
    J -->|å¦| K[æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯]
    K --> G
    J -->|æ˜¯| L[ç”Ÿæˆé¢„çº¦å•å·]
    L --> M[å‘é€é€šçŸ¥]
    M --> N[æ˜¾ç¤ºé¢„çº¦è¯¦æƒ…]
    N --> O([ç»“æŸ])
    
    style A fill:#90EE90
    style O fill:#FFB6C1
    </div>
</div>

</div>


<div class="page page-break">

<h3>7.2 åŒ»ç”Ÿæ’ç­ç®¡ç†æ´»åŠ¨å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart TD
    A([å¼€å§‹]) --> B[ç™»å½•åŒ»ç”Ÿç«¯]
    B --> C[è¿›å…¥æ’ç­ç®¡ç†]
    C --> D[é€‰æ‹©æ—¥æœŸ]
    D --> E{å·²æœ‰æ’ç­?}
    E -->|æ˜¯| F[æŸ¥çœ‹/ä¿®æ”¹æ’ç­]
    E -->|å¦| G[åˆ›å»ºæ–°æ’ç­]
    G --> H[è®¾ç½®æ—¶æ®µ]
    H --> I[è®¾ç½®å·æºæ•°é‡]
    I --> J[ä¿å­˜æ’ç­]
    F --> K{éœ€è¦ä¿®æ”¹?}
    K -->|æ˜¯| H
    K -->|å¦| L([ç»“æŸ])
    J --> L
    
    style A fill:#90EE90
    style L fill:#FFB6C1
    </div>
</div>

<h3>7.3 ç®¡ç†å‘˜å®¡æ‰¹åŒ»ç”Ÿæ´»åŠ¨å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart TD
    A([å¼€å§‹]) --> B[ç™»å½•ç®¡ç†å‘˜ç«¯]
    B --> C[æŸ¥çœ‹å¾…å®¡æ‰¹åˆ—è¡¨]
    C --> D{æœ‰å¾…å®¡æ‰¹?}
    D -->|å¦| E([ç»“æŸ])
    D -->|æ˜¯| F[é€‰æ‹©åŒ»ç”Ÿ]
    F --> G[æŸ¥çœ‹åŒ»ç”Ÿèµ„æ–™]
    G --> H{å®¡æ‰¹å†³å®š}
    H -->|é€šè¿‡| I[æ›´æ–°çŠ¶æ€ä¸ºACTIVE]
    H -->|æ‹’ç»| J[æ›´æ–°çŠ¶æ€ä¸ºINACTIVE]
    I --> K[å‘é€é€šçŸ¥ç»™åŒ»ç”Ÿ]
    J --> L[å¡«å†™æ‹’ç»åŸå› ]
    L --> K
    K --> C
    
    style A fill:#90EE90
    style E fill:#FFB6C1
    </div>
</div>

<h2>å…«ã€ç”¨ä¾‹å›¾</h2>

<h3>8.1 ç³»ç»Ÿç”¨ä¾‹å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
flowchart LR
    subgraph æ‚£è€…åŠŸèƒ½
        UC1((æ³¨å†Œç™»å½•))
        UC2((æœç´¢åŒ»ç”Ÿ))
        UC3((é¢„çº¦æŒ‚å·))
        UC4((å–æ¶ˆé¢„çº¦))
        UC5((æŸ¥çœ‹é¢„çº¦))
        UC6((è¯„ä»·åŒ»ç”Ÿ))
        UC7((AIé—®è¯Š))
    end
    
    subgraph åŒ»ç”ŸåŠŸèƒ½
        UC8((æ³¨å†Œç™»å½•))
        UC9((ç®¡ç†æ’ç­))
        UC10((æŸ¥çœ‹é¢„çº¦))
        UC11((ç”³è¯·è¯·å‡))
    end
    
    subgraph ç®¡ç†å‘˜åŠŸèƒ½
        UC12((ç™»å½•))
        UC13((å®¡æ‰¹åŒ»ç”Ÿ))
        UC14((ç®¡ç†ç§‘å®¤))
        UC15((ç³»ç»Ÿç»Ÿè®¡))
    end
    
    Patient[ğŸ‘¤ æ‚£è€…]
    Doctor[ğŸ‘¨â€âš•ï¸ åŒ»ç”Ÿ]
    Admin[ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜]
    
    Patient --- UC1
    Patient --- UC2
    Patient --- UC3
    Patient --- UC4
    Patient --- UC5
    Patient --- UC6
    Patient --- UC7
    
    Doctor --- UC8
    Doctor --- UC9
    Doctor --- UC10
    Doctor --- UC11
    
    Admin --- UC12
    Admin --- UC13
    Admin --- UC14
    Admin --- UC15
    </div>
</div>

</div>

<div class="page page-break">

<h2>ä¹ã€é¡¹ç›®ç®¡ç†å›¾</h2>

<h3>9.1 ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
graph TD
    A[åŒ»é™¢é¢„çº¦æŒ‚å·ç³»ç»Ÿ] --> B[æ‚£è€…ç«¯]
    A --> C[åŒ»ç”Ÿç«¯]
    A --> D[ç®¡ç†å‘˜ç«¯]
    A --> E[å…¬å…±æœåŠ¡]
    
    B --> B1[ç”¨æˆ·æ³¨å†Œç™»å½•]
    B --> B2[åŒ»ç”Ÿæœç´¢]
    B --> B3[é¢„çº¦æŒ‚å·]
    B --> B4[é¢„çº¦ç®¡ç†]
    B --> B5[åŒ»ç”Ÿè¯„ä»·]
    B --> B6[AIé—®è¯Š]
    
    C --> C1[åŒ»ç”Ÿæ³¨å†Œ]
    C --> C2[æ’ç­ç®¡ç†]
    C --> C3[é¢„çº¦æŸ¥çœ‹]
    C --> C4[è¯·å‡ç”³è¯·]
    
    D --> D1[åŒ»ç”Ÿå®¡æ‰¹]
    D --> D2[ç§‘å®¤ç®¡ç†]
    D --> D3[è¯·å‡å®¡æ‰¹]
    D --> D4[ç³»ç»Ÿç»Ÿè®¡]
    
    E --> E1[GPSå®šä½]
    E --> E2[æ¶ˆæ¯é€šçŸ¥]
    E --> E3[æ–‡ä»¶ä¸Šä¼ ]
    </div>
</div>

<h3>9.2 å¢é‡è¿­ä»£å¼€å‘æ¨¡å‹å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
graph LR
    subgraph å¢é‡1["å¢é‡1: æ ¸å¿ƒåŠŸèƒ½"]
        A1[éœ€æ±‚åˆ†æ] --> A2[è®¾è®¡]
        A2 --> A3[ç¼–ç ]
        A3 --> A4[æµ‹è¯•]
    end
    
    subgraph å¢é‡2["å¢é‡2: æ‰©å±•åŠŸèƒ½"]
        B1[éœ€æ±‚åˆ†æ] --> B2[è®¾è®¡]
        B2 --> B3[ç¼–ç ]
        B3 --> B4[æµ‹è¯•]
    end
    
    subgraph å¢é‡3["å¢é‡3: ä¼˜åŒ–éƒ¨ç½²"]
        C1[éœ€æ±‚åˆ†æ] --> C2[è®¾è®¡]
        C2 --> C3[ç¼–ç ]
        C3 --> C4[æµ‹è¯•]
    end
    
    A4 --> B1
    B4 --> C1
    C4 --> D[ç³»ç»Ÿäº¤ä»˜]
    
    style A1 fill:#FFE4B5
    style A2 fill:#FFE4B5
    style A3 fill:#FFE4B5
    style A4 fill:#FFE4B5
    style B1 fill:#98FB98
    style B2 fill:#98FB98
    style B3 fill:#98FB98
    style B4 fill:#98FB98
    style C1 fill:#87CEEB
    style C2 fill:#87CEEB
    style C3 fill:#87CEEB
    style C4 fill:#87CEEB
    style D fill:#DDA0DD
    </div>
</div>

<h3>9.3 ç³»ç»ŸæŠ€æœ¯æ¶æ„å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
graph TB
    subgraph å®¢æˆ·ç«¯
        Browser[æµè§ˆå™¨]
    end
    
    subgraph å‰ç«¯æœåŠ¡
        Nginx[Nginx:8081]
        Vue[Vue 3 SPA]
    end
    
    subgraph åç«¯æœåŠ¡
        SpringBoot[Spring Boot:8082]
        Security[Spring Security]
        JPA[Spring Data JPA]
    end
    
    subgraph å¤–éƒ¨æœåŠ¡
        AI[é€šä¹‰åƒé—®API]
        Map[é«˜å¾·åœ°å›¾API]
    end
    
    subgraph æ•°æ®å±‚
        MySQL[(MySQL:3306)]
    end
    
    Browser --> Nginx
    Nginx --> Vue
    Vue --> SpringBoot
    SpringBoot --> Security
    SpringBoot --> JPA
    SpringBoot --> AI
    SpringBoot --> Map
    JPA --> MySQL
    
    style Browser fill:#E6E6FA
    style Nginx fill:#98FB98
    style Vue fill:#98FB98
    style SpringBoot fill:#FFB6C1
    style Security fill:#FFB6C1
    style JPA fill:#FFB6C1
    style AI fill:#FFDAB9
    style Map fill:#FFDAB9
    style MySQL fill:#87CEEB
    </div>
</div>

</div>

<div class="page page-break">

<h3>9.4 é¡¹ç›®æ´»åŠ¨ç½‘ç»œå›¾ï¼ˆå…³é”®è·¯å¾„ï¼‰</h3>
<div class="diagram-container">
    <div class="mermaid">
graph LR
    T1[T1 éœ€æ±‚åˆ†æ<br/>3å¤©] --> T2[T2 ç³»ç»Ÿè®¾è®¡<br/>4å¤©]
    T2 --> T3[T3 æ•°æ®åº“è®¾è®¡<br/>2å¤©]
    T3 --> T4[T4 åç«¯æ¡†æ¶<br/>2å¤©]
    T3 --> T8[T8 å‰ç«¯æ¡†æ¶<br/>2å¤©]
    T4 --> T5[T5 ç”¨æˆ·è®¤è¯<br/>5å¤©]
    T5 --> T6[T6 é¢„çº¦æŒ‚å·<br/>8å¤©]
    T5 --> T7[T7 æ’ç­ç®¡ç†<br/>6å¤©]
    T6 --> T12[T12 AIåŠ©æ‰‹<br/>3å¤©]
    T8 --> T9[T9 æ‚£è€…ç«¯<br/>8å¤©]
    T8 --> T10[T10 åŒ»ç”Ÿç«¯<br/>5å¤©]
    T8 --> T11[T11 ç®¡ç†å‘˜ç«¯<br/>5å¤©]
    T6 --> T13[T13 é›†æˆæµ‹è¯•<br/>5å¤©]
    T7 --> T13
    T9 --> T13
    T10 --> T13
    T11 --> T13
    T12 --> T13
    T13 --> T14[T14 Dockeréƒ¨ç½²<br/>2å¤©]
    T14 --> T15[T15 ç³»ç»Ÿä¸Šçº¿<br/>1å¤©]
    
    style T1 fill:#ff9999
    style T2 fill:#ff9999
    style T3 fill:#ff9999
    style T4 fill:#ff9999
    style T5 fill:#ff9999
    style T6 fill:#ff9999
    style T13 fill:#ff9999
    style T14 fill:#ff9999
    style T15 fill:#ff9999
    style T7 fill:#90EE90
    style T8 fill:#90EE90
    style T9 fill:#90EE90
    style T10 fill:#90EE90
    style T11 fill:#90EE90
    style T12 fill:#90EE90
    </div>
</div>
<p class="center">çº¢è‰²ï¼šå…³é”®è·¯å¾„ä»»åŠ¡ | ç»¿è‰²ï¼šéå…³é”®è·¯å¾„ä»»åŠ¡</p>
<p class="center">å…³é”®è·¯å¾„ï¼šT1â†’T2â†’T3â†’T4â†’T5â†’T6â†’T13â†’T14â†’T15ï¼ˆæ€»å·¥æœŸ32å¤©ï¼‰</p>

<h3>9.5 é¡¹ç›®ç”˜ç‰¹å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
gantt
    title åŒ»é™¢é¢„çº¦æŒ‚å·ç³»ç»Ÿå¼€å‘è¿›åº¦
    dateFormat  YYYY-MM-DD
    section éœ€æ±‚ä¸è®¾è®¡
    éœ€æ±‚åˆ†æ           :crit, t1, 2025-01-01, 3d
    ç³»ç»Ÿè®¾è®¡           :crit, t2, after t1, 4d
    æ•°æ®åº“è®¾è®¡         :crit, t3, after t2, 2d
    section åç«¯å¼€å‘
    åç«¯æ¡†æ¶æ­å»º       :crit, t4, after t3, 2d
    ç”¨æˆ·è®¤è¯æ¨¡å—       :crit, t5, after t4, 5d
    é¢„çº¦æŒ‚å·æ¨¡å—       :crit, t6, after t5, 8d
    æ’ç­ç®¡ç†æ¨¡å—       :t7, after t5, 6d
    AIæ™ºèƒ½åŠ©æ‰‹         :t12, after t6, 3d
    section å‰ç«¯å¼€å‘
    å‰ç«¯æ¡†æ¶æ­å»º       :t8, after t3, 2d
    æ‚£è€…ç«¯ç•Œé¢         :t9, after t8, 8d
    åŒ»ç”Ÿç«¯ç•Œé¢         :t10, after t8, 5d
    ç®¡ç†å‘˜ç«¯ç•Œé¢       :t11, after t8, 5d
    section æµ‹è¯•éƒ¨ç½²
    ç³»ç»Ÿé›†æˆæµ‹è¯•       :crit, t13, after t6 t7 t9 t10 t11 t12, 5d
    Dockeréƒ¨ç½²é…ç½®     :crit, t14, after t13, 2d
    ç³»ç»Ÿä¸Šçº¿           :crit, milestone, t15, after t14, 1d
    </div>
</div>

<h3>9.6 å›¢é˜Ÿç»„ç»‡ç»“æ„å›¾</h3>
<div class="diagram-container">
    <div class="mermaid">
graph TD
    PM[ğŸ‘¨â€ğŸ’¼ é¡¹ç›®ç»ç†<br/>é¡¹ç›®è§„åˆ’/è¿›åº¦æ§åˆ¶]
    
    PM --> BE[ğŸ‘¨â€ğŸ’» åç«¯å¼€å‘<br/>Java/Spring Boot]
    PM --> FE[ğŸ‘©â€ğŸ’» å‰ç«¯å¼€å‘<br/>Vue/JavaScript]
    PM --> QA[ğŸ” æµ‹è¯•äººå‘˜<br/>åŠŸèƒ½æµ‹è¯•/é›†æˆæµ‹è¯•]
    PM --> OPS[ğŸ”§ è¿ç»´äººå‘˜<br/>Docker/æœåŠ¡å™¨]
    
    BE --> BE1[ç”¨æˆ·è®¤è¯æ¨¡å—]
    BE --> BE2[é¢„çº¦æŒ‚å·æ¨¡å—]
    BE --> BE3[æ’ç­ç®¡ç†æ¨¡å—]
    BE --> BE4[AIåŠ©æ‰‹æ¨¡å—]
    
    FE --> FE1[æ‚£è€…ç«¯ç•Œé¢]
    FE --> FE2[åŒ»ç”Ÿç«¯ç•Œé¢]
    FE --> FE3[ç®¡ç†å‘˜ç«¯ç•Œé¢]
    
    style PM fill:#FFD700
    style BE fill:#87CEEB
    style FE fill:#98FB98
    style QA fill:#DDA0DD
    style OPS fill:#FFA07A
    </div>
</div>

</div>

<script>
    mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        securityLevel: 'loose',
        flowchart: {
            useMaxWidth: true,
            htmlLabels: true,
            curve: 'basis'
        },
        sequence: {
            useMaxWidth: true,
            showSequenceNumbers: false
        },
        er: {
            useMaxWidth: true
        },
        gantt: {
            useMaxWidth: true
        }
    });
</script>

</body>
</html>
