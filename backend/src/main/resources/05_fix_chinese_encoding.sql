-- =================================================================================================
-- 修复中文乱码数据脚本
-- =================================================================================================
-- 说明：此脚本用于修复因编码问题导致的乱码数据
-- 执行方式：在 Navicat 中手动执行（不要放在 data-locations 中，避免重复执行）

-- =================================================================================================
-- 修复科室表的中文数据
-- =================================================================================================
-- 如果数据已经乱码，需要重新插入正确的中文数据
-- 使用 INSERT ... ON DUPLICATE KEY UPDATE 或先删除再插入

-- 方法1：使用 ON DUPLICATE KEY UPDATE（推荐）
INSERT INTO departments (id, name, category, description, location, phone, sort_order, enabled) VALUES
('dpt-001', '心血管内科', '内科系', '专注于心血管系统疾病的诊断和治疗，如高血压、冠心病等。', '门诊大楼三层A区', '010-12345671', 1, 1),
('dpt-002', '骨科', '外科系', '处理骨骼、关节、韧带、肌腱和肌肉的损伤和疾病。', '门诊大楼二层B区', '010-12345672', 2, 1),
('dpt-003', '皮肤科', '其他', '诊治各种皮肤、指甲及毛发相关的疾病。', '门诊大楼一层C区', '010-12345673', 3, 1),
('dpt-004', '儿科', '其他', '为婴幼儿、儿童和青少年提供全面的医疗保健服务。', '儿童医疗中心二层', '010-12345674', 4, 1),
('dpt-005', '眼科', '外科系', '负责眼部疾病的诊断、治疗和手术。', '门诊大楼四层A区', '010-12345675', 5, 1),
('dpt-006', '口腔科', '其他', '诊治口腔、牙齿、牙龈及相关疾病的专科。', '门诊大楼一层D区', '010-12345676', 6, 1),
('dpt-007', '妇科', '其他', '为女性提供妇科疾病诊断、治疗和预防保健服务。', '门诊大楼二层C区', '010-12345677', 7, 1)
ON DUPLICATE KEY UPDATE
    name = VALUES(name),
    category = VALUES(category),
    description = VALUES(description),
    location = VALUES(location),
    phone = VALUES(phone),
    sort_order = VALUES(sort_order),
    enabled = VALUES(enabled);

-- =================================================================================================
-- 修复检查项目表的中文数据（如果需要）
-- =================================================================================================
-- 注意：如果检查项目表已经有数据，且需要更新为健康检查推荐项目，请使用 03_update_examination_items_data.sql
-- 这里只修复编码问题，不改变数据结构

-- 如果检查项目表中有乱码，可以执行以下语句修复（根据实际数据调整）
-- INSERT INTO examination_items (id, name, description, price, category, department_id, enabled) VALUES
-- ('exam-001', '血常规', '检查血液中红细胞、白细胞、血小板等各项指标，判断是否存在贫血、感染、血液病等。', 30.00, '血液检查', NULL, 1),
-- ...
-- ON DUPLICATE KEY UPDATE
--     name = VALUES(name),
--     description = VALUES(description),
--     category = VALUES(category);

-- =================================================================================================
-- 验证修复结果
-- =================================================================================================
-- 执行以下查询检查中文是否正常显示
SELECT id, name, description FROM departments ORDER BY sort_order;

